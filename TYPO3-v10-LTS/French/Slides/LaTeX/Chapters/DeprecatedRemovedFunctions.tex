% ------------------------------------------------------------------------------
% TYPO3 Version 10 LTS - What's New (French Version)
%
% @license	Creative Commons BY-NC-SA 3.0
% @link		https://typo3.org/help/documentation/whats-new/
% @language	French
% ------------------------------------------------------------------------------

\section{Fonctions dépréciées et retirées}
\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}

	\begin{center}\huge{\color{typo3darkgrey}\textbf{Fonctions dépréciées et retirées}}\end{center}
	\begin{center}\large{\textit{Noyau de TYPO3 nettoyé et prêt pour l'avenir}}\end{center}

\end{frame}

% ------------------------------------------------------------------------------
% ==============================================================================
% TYPO3 Version 10.1
% ==============================================================================
% ------------------------------------------------------------------------------
% Deprecation | 88854 | T3_THIS_LOCATION
% Deprecation | 88862 | T3_RETURN_URL
% Deprecation | 89033 | jumpToUrl
% Deprecation | 88854 | jumpExt() of RecordListController

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Dépréciations JavaScript (1)}

	\begin{itemize}
		\item Deux variables globales JavaScript sont marquées \textbf{dépréciées}~:

			\begin{itemize}
				\item \texttt{T3\_THIS\_LOCATION}
				\item \texttt{T3\_RETURN\_URL}
			\end{itemize}

		\item La fonction JavaScript connue \texttt{jumpToUrl()} est marquée \textbf{dépréciée}.
			Options de migration~:

			\begin{itemize}
				\item Utiliser \texttt{window.location.href = '\ldots';}
				\item ou un lien HTML comme \texttt{<a href="\ldots">link</a>}
			\end{itemize}

		\item La fonction JavaScript \texttt{jumpExt()} est marquée \textbf{dépréciée}.

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89215 | jQuery.clearable

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Dépréciations JavaScript (2)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item Le plugin jQuery \texttt{jquery.clearable},
			qui fournis un bouton pour vider un champ de formulaire, est marqué \textbf{déprécié}.
		\item Migration~: utiliser le module \small\texttt{TYPO3/CMS/Backend/Input/Clearable}\normalsize
			et la méthode \texttt{clearable()} sur les HTMLInputElement natifs.

\begin{lstlisting}
require(['TYPO3/CMS/Backend/Input/Clearable'], function() {
  const inputField = document.querySelector('#myinput');
  if (inputField !== null) {
    inputField.clearable();
  }

  const clear = Array.from(document.querySelectorAll('.t3js-clearable')).filter(inputElement => {
    return !inputElement.classList.contains('t3js-datetimepicker');
  });
  clear.forEach(clearableField => clearableField.clearable());
});
\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 88839 | CLI lowlevel request handlers

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Gestionnaire de commandes CLI}

	\begin{itemize}
		\item Les commandes CLI sont gérées à l'aide de la classe \texttt{CommandApplication}.
		\item Cette classe encapsule la
			\href{https://symfony.com/doc/current/components/console.html}{console Symfony}.

		\item L'interface utilisée préalablement et la classe \texttt{CommandRequestHandler}
			sont marqués \textbf{dépréciés}~:

			\begin{itemize}
				\item
					\texttt{TYPO3\textbackslash
						CMS\textbackslash
						Core\textbackslash
						Console\textbackslash
						RequestHandlerInterface}
				\item
					\texttt{TYPO3\textbackslash
						CMS\textbackslash
						Core\textbackslash
						Console\textbackslash
						CommandRequestHandler}
			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89127 | Cleanup RecordHistory handling

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Prise en charge de l'historique}

	Changements faits dans la classe
		\smaller
			\texttt{TYPO3\textbackslash
				CMS\textbackslash
				Backend\textbackslash
				History\textbackslash
				RecordHistory}~:
		\normalsize

	\begin{itemize}

		\item Visibilité des propriétés \texttt{changeLog} et \texttt{lastHistoryEntry}
			changée en \texttt{protected} (avec des accesseurs publics ajoutés).
		\item Visibilité des méthodes \texttt{getHistoryEntry()} et \texttt{getHistoryData()}
			changée en \texttt{protected}.
		\item Les méthodes suivantes sont marquées \textbf{dépréciées}~:

			\begin{itemize}\smaller
				\item \texttt{createChangeLog()}
				\item \texttt{shouldPerformRollback()}
				\item \texttt{getElementData()}
				\item \texttt{performRollback()}
				\item \texttt{createMultipleDiff()}
				\item \texttt{setLastHistoryEntry()}
			\end{itemize}\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89037 | Deprecated LocallangXmlParser

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Fichiers de langue XML}

	\begin{itemize}
		\item Le format XLIFF est utilisé pour les fichiers de langue depuis TYPO3 v4.6.
		\item L'usage des fichiers XML est marqué \textbf{déprécié}
			et déclenche un avertissement ou une erreur.
		\item Ceci inclus le fait d'exécuter l'analyseur XML suivant~:\newline
			\small
				\texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Localization\textbackslash
					Parser\textbackslash
					LocallangXmlParser}
			\normalsize
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% ==============================================================================
% TYPO3 Version 10.2
% ==============================================================================
% ------------------------------------------------------------------------------
% Deprecation | 89331 | FormEngine legacy functions

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{FormEngine}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item Les fonctions suivantes de FormEngine sont marquées \textbf{dépréciées}~:

			\begin{itemize}
				\item \texttt{setFormValueOpenBrowser()}\newline
					\smaller(utiliser \texttt{FormEngine.openPopupWindow()})\small

				\item \texttt{setFormValueFromBrowseWin()}\newline
					\smaller(utiliser \texttt{FormEngine.setSelectOptionFromExternalSource()})\small

				\item \texttt{setHiddenFromList()}\newline
					\smaller(utiliser \texttt{FormEngine.updateHiddenFieldValueFromSelect()})\small

				\item \texttt{setFormValueManipulate()}\newline
					\smaller(pas de remplacement car c'est interne)\small

				\item \texttt{setFormValue\_getFObj()}\newline
					\smaller(utiliser \texttt{FormEngine.getFormElement()})\small

			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89733 | Signal Slots in Core Extension migrated to PSR-14 events

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Signal/Slot}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item Les Signal/Slots suivants sont remplacés par les événements PSR-14 et
			sont donc marqués \textbf{dépréciés}~:
			\newline

			\begin{itemize}\tiny
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Imaging\textbackslash
					IconFactory::buildIconForResourceSignal}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Database\textbackslash
					SoftReferenceIndex::setTypoLinkPartsElement}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Database\textbackslash
					ReferenceIndex::shouldExcludeTableFromReferenceIndex}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Utility\textbackslash
					ExtensionManagementUtility::tcaIsBeingBuilt}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Install\textbackslash
					Service\textbackslash
					SqlExpectedSchemaService::tablesDefinitionIsBeingBuilt}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Tree\textbackslash
					TableConfiguration\textbackslash
					DatabaseTreeDataProvider::PostProcessTreeData}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Backend\textbackslash
					Backend\textbackslash
					ToolbarItems\textbackslash
					SystemInformationToolbarItem::getSystemInformation}
					\newline
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Backend\textbackslash
					Backend\textbackslash
					ToolbarItems\textbackslash
					SystemInformationToolbarItem::loadMessages}

			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89631 | Use Environment API to fetch application context

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Contexte d'application}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item La méthode \texttt{GeneralUtility::getApplicationContext()} est marquée \textbf{dépréciée}.
		\item La méthode suivante doit être utilisée~:\newline
		 	\texttt{TYPO3\textbackslash
				CMS\textbackslash
				Core\textbackslash
				Core\textbackslash
				Environment::getContext()}.

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% ==============================================================================
% TYPO3 Version 10.3
% ==============================================================================
% ------------------------------------------------------------------------------
% Deprecation | 89463 | Deprecate switchable controller actions

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Switchable Controller Actions}

	\begin{itemize}
		\item Les «~Switchable Controller Actions~» (SCA) sont marquées \textbf{dépréciées}.
		\item Les SCA sont utilisées pour surcharger l'ensemble des contrôleurs et actions à l'aide
			du TypoScript ou des Flexforms.
		\item Utiliser le même plugin comme point d'entrée de nombreuses fonctionnalités contredit
			le concept d'une plugin pour un objectif précis.
		\item Les plugins qui utilisent SCA devraient être scindés en différents plugins.
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90007 | Global constants TYPO3_version and TYPO3_branch

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Constantes globales}

	% decrease font size for code listing
	\lstset{basicstyle=\smaller\ttfamily}

	\begin{itemize}
		\item Ces deux constantes globales sont marquées \textbf{dépréciées}~:

			\begin{itemize}
				\item \texttt{TYPO3\_version}
				\item \texttt{TYPO3\_branch}
			\end{itemize}

		\item Cette classe PHP doit être utilisée à la place~:\newline
			\small
				\texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Information\textbackslash
					Typo3Version}\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89673 | Deprecate Extbases WebRequest and WebResponse

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Extbase~: \texttt{WebRequest}/\texttt{WebResponse}}

	\begin{itemize}
		\item Ces deux classes Extbase sont marquées \textbf{dépréciées}~:
			\begin{itemize}
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Mvc\textbackslash
					Web\textbackslash
					Request}
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Mvc\textbackslash
					Web\textbackslash
					Response}
			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90258 | Simplified RTE Parser API

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{API de l'analyseur RTE simplifiée}

	\begin{itemize}
		\item La classe PHP \texttt{RteHtmlParser} fournie une API simplifiée.
		\item En conséquence, ces deux méthodes sont marquées \textbf{dépréciées}~:

			\begin{itemize}
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Html\textbackslash
					RteHtmlParser->init()}
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Html\textbackslash
					RteHtmlParser->RTE\_transform()}
			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89139 | Console Commands configuration migrated to Symfony service tags

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Configuration des commandes console}

	\begin{itemize}
		\item Comme les configurations des commandes de console sont migrées en annotation de service Symfony,
			le fichier de configuration des commandes de console \texttt{Configuration/Commands.php}
			est marqué \textbf{déprécié}.
		\item Utilisez l'annotation d'injection de dépendance de service Symfony \texttt{console.command}.

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Important | 89672 | transOrigPointerField is not longer allowed to be excluded

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{TCA~: \texttt{transOrigPointerField}}

	\begin{itemize}
		\item Lorsque le champ indiqué dans l'option TCA suivante pouvait être exclus,
			les données enregistrées en base pouvant devenir incohérentes~:
			\small
				\texttt{\$GLOBALS['TCA'][\$table]['ctrl']['transOrigPointerField']}
			\normalsize

		\item En conséquence, il n'est plus possible d'exclure le champ.
		\item Un assistant de migration retire l'option d'exclusion du TCA et ajoute
			un message de dépréciation lorsque du code doit être mis à jour.
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90421 | DocumentTemplate

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{DocumentTemplate}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item La classe suivante est marquée \textbf{dépréciée}~:

		\begin{itemize}
			\item \texttt{TYPO3\textbackslash
				CMS\textbackslash
				Backend\textbackslash
				Template\textbackslash
				DocumentTemplate}
		\end{itemize}

		\item Elle était utilisée comme base pour le rendu des modules backend ou pour des rendus HTML du backend.
		\item Depuis TYPO3 v7, l'API de ModuleTemplate doit être utilisée.
\begin{lstlisting}
use TYPO3\CMS\Backend\Template\ModuleTemplate;
\ldots
\$moduleTemplate = GeneralUtility::makeInstance(ModuleTemplate::class);
\$content = \$this->getHtmlContentFromMyModule();
\$moduleTemplate->setTitle('My module');
\$moduleTemplate->setContent(\$content);
return new HtmlResponse(\$moduleTemplate->renderContent());
\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90390 | Deprecate BrokenLinkRepository::getNumberOfBrokenLinks() in linkvalidator

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
\framesubtitle{Validateur de liens}

\begin{itemize}
	\item La méthode suivante est marquée \textbf{dépréciée}~:
	\newline\newline
		\smaller
			\texttt{TYPO3\textbackslash
				CMS\textbackslash
				Linkvalidator\textbackslash
				Repository\textbackslash
				BrokenLinkRepository}\newline
			\texttt{->getNumberOfBrokenLinks()}\normalsize\newline

	\item Utilisez cette méthode à la place~:\newline
		\small\texttt{BrokenLinkRepository::isLinkTargetBrokenLink()}\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% ==============================================================================
% TYPO3 Version 10.4
% ==============================================================================
% ------------------------------------------------------------------------------
% Deprecation | 91001 | Various methods within GeneralUtility
% Deprecation | 90956 | Alternative fetch methods and reports for GeneralUtility::getUrl()

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{GeneralUtility (1)}

	\begin{itemize}
		\item Ces méthodes de GeneralUtility sont marquées \textbf{dépréciées}~:
			\begin{itemize}\smaller
				\item \texttt{GeneralUtility::IPv6Hex2Bin()}
				\item \texttt{GeneralUtility::IPv6Bin2Hex()}
				\item \texttt{GeneralUtility::compressIPv6()}
				\item \texttt{GeneralUtility::milliseconds()}
				\item \texttt{GeneralUtility::linkThisUrl()}
				\item \texttt{GeneralUtility::flushDirectory()}
			\end{itemize}\normalsize
			\vspace{0.4cm}

		\item Utiliser les arguments autre que l'URL dans \texttt{GeneralUtility::getUrl()}
			est marqué \textbf{déprécié}.\newline
			\smaller
				(sont inclus~: \texttt{\$includeHeader}, \texttt{\$requestHeaders}, et \texttt{\$report})
			\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90800 | GeneralUtility::isRunningOnCgiServerApi

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{GeneralUtility (2)}

	\begin{itemize}
		\item Cette méthode est retirée de la classe \texttt{GeneralUtility}~:
			\texttt{GeneralUtility::isRunningOnCgiServerApi()}.
		\item Elle est remplacée par l'appel suivant~:\newline
			\texttt{Environment::isRunningOnCgiServer()}.

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90964 | LanguageService functionality and internal properties

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Fonctionnalité LanguageService}

	Changements de LanguageService (aussi connu sous \texttt{\$GLOBALS[LANG]}).
	\vspace{0.4cm}
	\begin{itemize}
		\item La visibilité des méthodes suivantes a changé~:
			\begin{itemize}\smaller
				\item \texttt{LanguageService->LL\_files\_cache} (devenue \texttt{protected})
				\item \texttt{LanguageService->LL\_labels\_cache} (devenue \texttt{protected})
				\item \texttt{LanguageService->getLLL()} (devenue \texttt{protected})
				\item \texttt{LanguageService->debugLL()} (devenue \texttt{protected})
			\end{itemize}\normalsize
			\vspace{0.2cm}

		\item Cette méthode est marquée \textbf{dépréciée}~:
			\begin{itemize}\smaller
				\item \texttt{LanguageService->getLabelsWithPrefix()}
			\end{itemize}\normalsize
			\vspace{0.2cm}

		\item Cette méthode est marquée \textbf{interne}~:
			\begin{itemize}\smaller
				\item \texttt{LanguageService->loadSingleTableDescription()}
			\end{itemize}\normalsize
			\vspace{0.2cm}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Important | 90897 | Remove bootstrap-slider
% Important | 86343 | Replace jQuerydatatables with tablesort
% Deprecation | 90686 | Deprecate model FileMount (Extbase)

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Bibliothèques et classes internes}

	\begin{itemize}
		\item Les bibliothèques internes suivantes sont retirées~:
			\begin{itemize}
				\item "bootstrap-slider"
				\item "jQuery.datatables"
			\end{itemize}
			\vspace{0.4cm}

		\item La classe interne \small\texttt{TYPO3\textbackslash
			CMS\textbackslash
			Extbase\textbackslash
			Domain\textbackslash
			Model\textbackslash
			FileMount}\normalsize\newline
			est marquée \textbf{dépréciée}.

	\end{itemize}

	\vspace{0.6cm}
	\begin{itemize}
		\item[\ding{228}] \textit{Rappel~:} \textit{Les auteurs d'extensions ne devraient jamais utiliser de bibliothèque
			qui ne soit par marquée comme API publique.}
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90937 | Various hooks in ContentObjectRenderer
% Deprecation | 90861 | Image-related methods within ContentObjectRenderer

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{ContentObjectRenderer}

	\begin{itemize}
		\item Ces hooks sont marqués \textbf{dépréciés}~:\newline
			\tiny
				\texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['SC\_OPTIONS']['tslib/class.tslib\_content.php']\ldots}
			\normalsize

			\begin{itemize}\smaller
				\item \texttt{['cObjTypeAndClass']}
				\item \texttt{['cObjTypeAndClassDefault']}
				\item \texttt{['extLinkATagParamsHandler']}
				\item \texttt{['typolinkLinkHandler']}
			\end{itemize}

		\item Ces méthodes sont marquées \textbf{dépréciées}~:

			\begin{itemize}\smaller
				\item \texttt{cImage()}
				\item \texttt{getBorderAttr()}
				\item \texttt{getImageTagTemplate()}
				\item \texttt{getImageSourceCollection()}
				\item \texttt{linkWrap()}
				\item \texttt{getAltParam()}
			\end{itemize}

			\smaller
				(elles ont été déplacées dans la classe ImageContentObject)
			\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90856 | Deprecate Widget AutoComplete ViewHelper (Fluid)

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{ViewHelper Fluid AutoComplete}

	\begin{itemize}
		\item Le ViewHelper Fluid \texttt{<f:widget.autocomplete>} et le contrôleur lié sont
			marqués \textbf{dépréciés}.
		\item Vous devez agir si vous utilisez ou étendez les éléments suivants~:

			\begin{itemize}\smaller
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Fluid\textbackslash
					ViewHelpers\textbackslash
					Widget\textbackslash
					AutocompleteViewHelper}
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Fluid\textbackslash
					ViewHelpers\textbackslash
					Widget\textbackslash
					Controller\textbackslash
					AutocompleteController}
			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90692 | Deprecate FileCollection models (Extbase)

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Modèles FileCollection}

	\begin{itemize}
		\item Ces modèles de FileCollection sont marqués \textbf{dépréciés}~:
			\vspace{0.4cm}
			\begin{itemize}\tiny
				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Domain\textbackslash
					Model\textbackslash
					StaticFileCollection}

				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Domain\textbackslash
					Model\textbackslash
					FolderBasedFileCollection}

				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Domain\textbackslash
					Model\textbackslash
					AbstractFileCollection}

				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Property\textbackslash
					TypeConverter\textbackslash
					StaticFileCollectionConverter}

				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Property\textbackslash
					TypeConverter\textbackslash
					FolderBasedFileCollectionConverter}

				\item \texttt{TYPO3\textbackslash
					CMS\textbackslash
					Extbase\textbackslash
					Property\textbackslash
					TypeConverter\textbackslash
					AbstractFileCollectionConverter}

			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90625 | Extbase SignalSlot Dispatcher (Extbase)

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Extbase SignalSlot Dispatcher}

	\begin{itemize}
		\item Pendant le développement de TYPO3 v10 ces derniers mois,
			tous les signaux Extbase fournis par TYPO3 ont été migrés en événements PSR-14.
		\item Le «~SignalSlot Dispatcher~» d'Extbase est marqué \textbf{déprécié}.
		\item Il est conseillé aux développeurs d'extension de migrer vers les événements PSR-14
			et les écouteurs d'événement.
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 90147 | Unified File Name Validator

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{API FileNameValidator}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item La logique de validation du nom de fichier à la création (envoie) ou
			au renommage est transférée sous l'API FileNameValidator~:
			\small
				\texttt{TYPO3\textbackslash
					CMS\textbackslash
					Core\textbackslash
					Resource\textbackslash
					Security\textbackslash
					FileNameValidator}
			\normalsize

		\item Options de migration~:
\begin{lstlisting}
// Ancien :
GeneralUtility::verifyFilenameAgainstDenyPattern(\$filename)
// Nouveau :
GeneralUtility::makeInstance(FileNameValidator::class)->isValid(\$filename)

// Ancien :
FILE_DENY_PATTERN_DEFAULT
// Nouveau :
FileNameValidator::DEFAULT_FILE_DENY_PATTERN
\end{lstlisting}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 88740 | Deprecate felogin pibase plugin

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{\texttt{EXT:felogin} Hooks}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}
		\item L'ensemble des hooks de \texttt{EXT:felogin} sont désactivés et seront retirés de TYPO3 v11~:

			\begin{itemize}\tiny
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['beforeRedirect']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['postProcContent']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['password\_changed']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['forgotPasswordMail']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['login\_confirmed']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['login\_error']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['loginFormOnSubmitFuncs']}
				\item \texttt{\$GLOBALS['TYPO3\_CONF\_VARS']['EXTCONF']['felogin']['logout\_confirmed']}
			\end{itemize}

		\item Voir le
			\href{https://docs.typo3.org/c/typo3/cms-core/master/en-us/Changelog/10.4/Deprecation-88740-DeprecateFeloginPibasePlugin.html}{journal des changements (en)}
			pour les options de migration.
	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Miscellaneous from 10.1
% ------------------------------------------------------------------------------
% Deprecation | 88850 | ContentObjectRenderer::sendNotifyEmail
% Deprecation | 88787 | BackendUtility::editOnClick

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Divers (1)}

	\begin{itemize}
		\item La fonction de mail ne doit pas être incluse dans la classe\newline
			\small
				\texttt{TYPO3\textbackslash
					CMS\textbackslash
					Frontend\textbackslash
					ContentObject\textbackslash
					ContentObjectRenderer}.\newline
			\normalsize
			Ainsi, la méthode \texttt{sendNotifyEmail()} est marquée \textbf{dépréciée} et sera retirée de TYPO3 v11.

		\item La méthode \texttt{editOnClick()} utilisée pour générer des cibles \texttt{onclick}
			en JavaScript est marquée \textbf{dépréciée} dans la classe~:\newline
			\small
				\texttt{TYPO3\textbackslash
					CMS\textbackslash
					Backend\textbackslash
					Utility\textbackslash
					BackendUtility}.
			\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Miscellaneous from 10.2
% ------------------------------------------------------------------------------
% Deprecation | 89468 | Deprecate injection of EnvironmentService in Web Request
% Deprecation | 89554 | Deprecate /TYPO3/CMS/Extbase/Mvc/Controller/AbstractController
% Deprecation | 89756 | BackendUtility::TYPO3_copyRightNotice

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Divers (2)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item La propriété \texttt{\$environmentService} de la classe suivante est marquée \textbf{dépréciée}~:
			\texttt{TYPO3\textbackslash
				CMS\textbackslash
				Extbase\textbackslash
				Mvc\textbackslash
				Web\textbackslash
				Response}.\newline
			\smaller
				(injectez le service d'environnement manuellement dans la sous-classe si besoin)
			\normalsize

		\item La classe interne suivante est marquée \textbf{dépréciée}~:\newline
			\texttt{TYPO3\textbackslash
				CMS\textbackslash
				Extbase\textbackslash
				Mvc\textbackslash
				Controller\textbackslash
				AbstractController}.

		\item La méthode suivante est marquée \textbf{dépréciée}~:\newline
			\texttt{TYPO3\
				CMS\
				Backend\
				Utility\
				BackendUtility::TYPO3\_copyRightNotice}.\newline
				\smaller
					(utilisez la classe PHP \texttt{Typo3Copyright} et sa méthode \texttt{getCopyrightNotice()})
				\normalsize

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% Deprecation | 89722 | GMENU_LAYERS related property TSFE->divSection
% Important | 89764 | Incompatible environment related dependency injection services have been removed

\begin{frame}[fragile]
	\frametitle{Fonctions dépréciées et retirées}
	\framesubtitle{Divers (3)}

	% decrease font size for code listing
	\lstset{basicstyle=\tiny\ttfamily}

	\begin{itemize}

		\item La propriété PHP \texttt{TypoScriptFrontendController->divSection} est marquée \textbf{dépréciée}.\newline
			\smaller
				(utilisez \texttt{\$GLOBALS['TSFE']->additionalHeaderData[]} pour ajouter du JavaScript depuis un contenu hors cache)
			\normalsize

		\item Dans le cadre du support Symfony 5.0 de TYPO3 v10.2, les services incompatibles d'injection de dépendance
			liés à l'environnement sont retirés~:

			\begin{itemize}
				\item \texttt{env.is\_unix}
				\item \texttt{env.is\_windows}
				\item \texttt{env.is\_cli}
				\item \texttt{env.is\_composer\_mode}
			\end{itemize}

	\end{itemize}

\end{frame}

% ------------------------------------------------------------------------------
% No Miscellaneous from 10.3 and 10.4
% ------------------------------------------------------------------------------
